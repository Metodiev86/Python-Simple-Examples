# -*- coding: utf-8 -*-

# Form implementation generated from reading ui file 'window_mobile_first.ui'
#
# Created by: PyQt5 UI code generator 5.15.10
#
# WARNING: Any manual changes made to this file will be lost when pyuic5 is
# run again.  Do not edit this file unless you know what you are doing.


from PyQt5 import QtCore, QtGui, QtWidgets
from sqlalchemy.orm import sessionmaker 
from Fresh_DB_Map import my_engine, Region, Client, Product, Category

Session = sessionmaker(bind=my_engine)
my_session = Session()

select_id_region = 0



class Ui_MainWindow(object):
    def setupUi(self, MainWindow):
        MainWindow.setObjectName("MainWindow")
        MainWindow.resize(390, 727)
        self.centralwidget = QtWidgets.QWidget(MainWindow)
        self.centralwidget.setObjectName("centralwidget")
        self.frameTop = QtWidgets.QFrame(self.centralwidget)
        self.frameTop.setGeometry(QtCore.QRect(0, 0, 381, 41))
        self.frameTop.setMouseTracking(False)
        self.frameTop.setTabletTracking(False)
        self.frameTop.setFrameShape(QtWidgets.QFrame.NoFrame)
        self.frameTop.setFrameShadow(QtWidgets.QFrame.Raised)
        self.frameTop.setObjectName("frameTop")
        self.showButton = QtWidgets.QPushButton(self.frameTop)
        self.showButton.setGeometry(QtCore.QRect(10, 0, 111, 40))
        font = QtGui.QFont()
        font.setFamily("Candara")
        font.setPointSize(14)
        font.setBold(True)
        font.setWeight(75)
        self.showButton.setFont(font)
        self.showButton.setMouseTracking(False)
        self.showButton.setTabletTracking(False)
        self.showButton.setAutoFillBackground(True)
        self.showButton.setObjectName("showButton")
        self.readButton = QtWidgets.QPushButton(self.frameTop)
        self.readButton.setGeometry(QtCore.QRect(140, 0, 111, 40))
        font = QtGui.QFont()
        font.setFamily("Candara")
        font.setPointSize(14)
        font.setBold(True)
        font.setWeight(75)
        self.readButton.setFont(font)
        self.readButton.setMouseTracking(False)
        self.readButton.setTabletTracking(False)
        self.readButton.setObjectName("readButton")
        self.deleteButton = QtWidgets.QPushButton(self.frameTop)
        self.deleteButton.setGeometry(QtCore.QRect(270, 0, 111, 40))
        font = QtGui.QFont()
        font.setFamily("Candara")
        font.setPointSize(14)
        font.setBold(True)
        font.setWeight(75)
        self.deleteButton.setFont(font)
        self.deleteButton.setMouseTracking(False)
        self.deleteButton.setTabletTracking(False)
        self.deleteButton.setFocusPolicy(QtCore.Qt.StrongFocus)
        self.deleteButton.setObjectName("deleteButton")
        self.frameSecond = QtWidgets.QFrame(self.centralwidget)
        self.frameSecond.setGeometry(QtCore.QRect(0, 40, 381, 61))
        self.frameSecond.setMouseTracking(False)
        self.frameSecond.setTabletTracking(False)
        self.frameSecond.setFrameShape(QtWidgets.QFrame.NoFrame)
        self.frameSecond.setFrameShadow(QtWidgets.QFrame.Raised)
        self.frameSecond.setObjectName("frameSecond")
        self.comboBox = QtWidgets.QComboBox(self.frameSecond)
        self.comboBox.setGeometry(QtCore.QRect(10, 10, 171, 41))
        font = QtGui.QFont()
        font.setFamily("Candara")
        font.setPointSize(20)
        font.setBold(False)
        font.setWeight(50)
        self.comboBox.setFont(font)
        self.comboBox.setMouseTracking(False)
        self.comboBox.setTabletTracking(False)
        self.comboBox.setObjectName("comboBox")
        self.switch_2 = QtWidgets.QSlider(self.frameSecond)
        self.switch_2.setGeometry(QtCore.QRect(200, 10, 41, 41))
        self.switch_2.setMinimumSize(QtCore.QSize(0, 0))
        self.switch_2.setMouseTracking(False)
        self.switch_2.setTabletTracking(False)
        self.switch_2.setMaximum(1)
        self.switch_2.setOrientation(QtCore.Qt.Horizontal)
        self.switch_2.setObjectName("switch_2")
        self.textBoxTotal = QtWidgets.QLineEdit(self.frameSecond)
        self.textBoxTotal.setGeometry(QtCore.QRect(260, 10, 121, 41))
        font = QtGui.QFont()
        font.setFamily("Consolas")
        font.setPointSize(26)
        font.setBold(False)
        font.setWeight(50)
        self.textBoxTotal.setFont(font)
        self.textBoxTotal.setMouseTracking(False)
        self.textBoxTotal.setTabletTracking(False)
        self.textBoxTotal.setFocusPolicy(QtCore.Qt.NoFocus)
        self.textBoxTotal.setReadOnly(True)
        self.textBoxTotal.setObjectName("textBoxTotal")
        self.tableWidget = QtWidgets.QTableWidget(self.centralwidget)
        self.tableWidget.setGeometry(QtCore.QRect(0, 110, 381, 521))
        self.tableWidget.setObjectName("tableWidget")
        self.tableWidget.setColumnCount(4)
        self.tableWidget.setRowCount(0)
        item = QtWidgets.QTableWidgetItem()
        font = QtGui.QFont()
        font.setKerning(False)
        item.setFont(font)
        self.tableWidget.setHorizontalHeaderItem(0, item)
        item = QtWidgets.QTableWidgetItem()
        self.tableWidget.setHorizontalHeaderItem(1, item)
        item = QtWidgets.QTableWidgetItem()
        self.tableWidget.setHorizontalHeaderItem(2, item)
        item = QtWidgets.QTableWidgetItem()
        self.tableWidget.setHorizontalHeaderItem(3, item)
        self.frameTirth = QtWidgets.QFrame(self.centralwidget)
        self.frameTirth.setGeometry(QtCore.QRect(-10, 640, 391, 41))
        self.frameTirth.setMouseTracking(False)
        self.frameTirth.setTabletTracking(False)
        self.frameTirth.setFrameShape(QtWidgets.QFrame.NoFrame)
        self.frameTirth.setFrameShadow(QtWidgets.QFrame.Plain)
        self.frameTirth.setObjectName("frameTirth")
        self.checkBox_Gift = QtWidgets.QCheckBox(self.frameTirth)
        self.checkBox_Gift.setGeometry(QtCore.QRect(290, 20, 91, 20))
        font = QtGui.QFont()
        font.setFamily("Candara")
        font.setPointSize(11)
        font.setBold(True)
        font.setWeight(75)
        self.checkBox_Gift.setFont(font)
        self.checkBox_Gift.setMouseTracking(False)
        self.checkBox_Gift.setTabletTracking(False)
        self.checkBox_Gift.setObjectName("checkBox_Gift")
        self.textboxQuontity = QtWidgets.QLineEdit(self.frameTirth)
        self.textboxQuontity.setGeometry(QtCore.QRect(10, 0, 51, 41))
        font = QtGui.QFont()
        font.setFamily("Arial")
        font.setPointSize(20)
        font.setBold(False)
        font.setWeight(50)
        self.textboxQuontity.setFont(font)
        self.textboxQuontity.setMouseTracking(False)
        self.textboxQuontity.setTabletTracking(False)
        self.textboxQuontity.setFocusPolicy(QtCore.Qt.ClickFocus)
        self.textboxQuontity.setInputMethodHints(QtCore.Qt.ImhDigitsOnly)
        self.textboxQuontity.setObjectName("textboxQuontity")
        self.buttonAdd = QtWidgets.QPushButton(self.frameTirth)
        self.buttonAdd.setGeometry(QtCore.QRect(210, 0, 71, 41))
        font = QtGui.QFont()
        font.setFamily("Candara")
        font.setPointSize(14)
        font.setBold(True)
        font.setWeight(75)
        self.buttonAdd.setFont(font)
        self.buttonAdd.setMouseTracking(False)
        self.buttonAdd.setTabletTracking(False)
        self.buttonAdd.setCheckable(False)
        self.buttonAdd.setObjectName("buttonAdd")
        self.checkBoxQuantity = QtWidgets.QCheckBox(self.frameTirth)
        self.checkBoxQuantity.setGeometry(QtCore.QRect(80, 10, 51, 21))
        font = QtGui.QFont()
        font.setFamily("Candara")
        font.setPointSize(12)
        font.setBold(True)
        font.setWeight(75)
        self.checkBoxQuantity.setFont(font)
        self.checkBoxQuantity.setMouseTracking(False)
        self.checkBoxQuantity.setTabletTracking(False)
        self.checkBoxQuantity.setCheckable(True)
        self.checkBoxQuantity.setObjectName("checkBoxQuantity")
        self.checkBox_Persent = QtWidgets.QCheckBox(self.frameTirth)
        self.checkBox_Persent.setGeometry(QtCore.QRect(290, 0, 71, 20))
        font = QtGui.QFont()
        font.setFamily("Candara")
        font.setPointSize(16)
        font.setBold(True)
        font.setWeight(75)
        self.checkBox_Persent.setFont(font)
        self.checkBox_Persent.setMouseTracking(False)
        self.checkBox_Persent.setTabletTracking(False)
        self.checkBox_Persent.setAutoFillBackground(False)
        self.checkBox_Persent.setIconSize(QtCore.QSize(16, 16))
        self.checkBox_Persent.setCheckable(True)
        self.checkBox_Persent.setObjectName("checkBox_Persent")
        self.textBoxProcent = QtWidgets.QLineEdit(self.frameTirth)
        self.textBoxProcent.setGeometry(QtCore.QRect(150, 0, 51, 41))
        font = QtGui.QFont()
        font.setFamily("Arial")
        font.setPointSize(20)
        font.setBold(False)
        font.setWeight(50)
        self.textBoxProcent.setFont(font)
        self.textBoxProcent.setMouseTracking(False)
        self.textBoxProcent.setTabletTracking(False)
        self.textBoxProcent.setInputMethodHints(QtCore.Qt.ImhDigitsOnly)
        self.textBoxProcent.setObjectName("textBoxProcent")
        self.listWidget = QtWidgets.QListWidget(self.centralwidget)
        self.listWidget.setGeometry(QtCore.QRect(0, 110, 381, 521))
        self.listWidget.setProperty("isWrapping", False)
        self.listWidget.setSelectionRectVisible(True)
        self.listWidget.setObjectName("listWidget")
        MainWindow.setCentralWidget(self.centralwidget)
        self.menubar = QtWidgets.QMenuBar(MainWindow)
        self.menubar.setGeometry(QtCore.QRect(0, 0, 390, 21))
        self.menubar.setObjectName("menubar")
        self.menuFile = QtWidgets.QMenu(self.menubar)
        self.menuFile.setObjectName("menuFile")
        self.menu = QtWidgets.QMenu(self.menubar)
        self.menu.setObjectName("menu")
        MainWindow.setMenuBar(self.menubar)
        self.statusbar = QtWidgets.QStatusBar(MainWindow)
        self.statusbar.setObjectName("statusbar")
        MainWindow.setStatusBar(self.statusbar)
        self.action = QtWidgets.QAction(MainWindow)
        self.action.setObjectName("action")
        self.action_2 = QtWidgets.QAction(MainWindow)
        self.action_2.setObjectName("action_2")
        self.action_3 = QtWidgets.QAction(MainWindow)
        self.action_3.setObjectName("action_3")
        self.action_4 = QtWidgets.QAction(MainWindow)
        self.action_4.setObjectName("action_4")
        self.menuFile.addAction(self.action)
        self.menuFile.addAction(self.action_2)
        self.menu.addAction(self.action_3)
        self.menu.addAction(self.action_4)
        self.menubar.addAction(self.menuFile.menuAction())
        self.menubar.addAction(self.menu.menuAction())

        self.retranslateUi(MainWindow)
        QtCore.QMetaObject.connectSlotsByName(MainWindow)
        self.comboBox.activated.connect(self.loadData_ListBox_Client)
    def loaddataTableView(self):
        """

        :rtype: object
        """
        
        regions = my_session.query(Region).all()

        produkts = [{"name": "Д-Р ФРЕШ  OV-пудра ЛИМОН син", "cena": 0.5, "count": 4},
                    {"name": "Д-Р ФРЕШ  Антимухъл ПИСТ. 0.5", "cena": 1.5, "count": 2},
                    {"name": "МАДЕЛ ЗА ПЕТНА SMACCHIOTUTTO Concentrato 400 ml", "cena": 2, "count": 1}]
        row = 0
        total = 0
        self.tableWidget.setRowCount(len(produkts))
        for produkt in produkts:
            self.tableWidget.setItem(row, 0, QtWidgets.QTableWidgetItem(produkt["name"]))
            self.tableWidget.setItem(row, 1, QtWidgets.QTableWidgetItem(str(produkt["cena"])))
            self.tableWidget.setItem(row, 2, QtWidgets.QTableWidgetItem(str(produkt["count"])))
            self.tableWidget.setItem(row, 3,
                                     QtWidgets.QTableWidgetItem(str(float((produkt["cena"]) * (produkt["count"])))))
            row = row + 1
            total = total + (float(produkt["cena"]) * float(produkt["count"]))
            self.textBoxTotal.setText(str(total))
       
   
    def loadData_ComboBox_Region(self):
        
        regions = my_session.query(Region).all()
        for region in regions:
            self.comboBox.addItem(region.Name)
        clients = clients = my_session.query(Client).where(Client.Regions_ID == (self.comboBox.currentIndex()+1)).all()
        for client in clients:
            self.listWidget.addItem(client.Name)
        print(self.comboBox.currentIndex())

    


    def retranslateUi(self, MainWindow):
        _translate = QtCore.QCoreApplication.translate
        MainWindow.setWindowTitle(_translate("MainWindow", "MainWindow"))
        self.showButton.setText(_translate("MainWindow", "Заявка"))
        self.readButton.setText(_translate("MainWindow", "Преглед"))
        self.deleteButton.setText(_translate("MainWindow", "Изтрий"))
        self.textBoxTotal.setText(_translate("MainWindow", "0"))
        item = self.tableWidget.horizontalHeaderItem(0)
        item.setText(_translate("MainWindow", "Име"))
        item = self.tableWidget.horizontalHeaderItem(1)
        item.setText(_translate("MainWindow", "Цена"))
        item = self.tableWidget.horizontalHeaderItem(2)
        item.setText(_translate("MainWindow", "Бр."))
        item = self.tableWidget.horizontalHeaderItem(3)
        item.setText(_translate("MainWindow", "Сума"))
        self.checkBox_Gift.setText(_translate("MainWindow", " + Подaрък"))
        self.textboxQuontity.setText(_translate("MainWindow", "0"))
        self.buttonAdd.setText(_translate("MainWindow", "Добави"))
        self.checkBoxQuantity.setText(_translate("MainWindow", "Стек"))
        self.checkBox_Persent.setText(_translate("MainWindow", "  + % "))
        self.textBoxProcent.setText(_translate("MainWindow", "0"))
        self.menuFile.setTitle(_translate("MainWindow", "File"))
        self.menu.setTitle(_translate("MainWindow", "Редактиране"))
        self.action.setText(_translate("MainWindow", "Начало"))
        self.action_2.setText(_translate("MainWindow", "Нов"))
        self.action_3.setText(_translate("MainWindow", "Нов Клиент"))
        self.action_4.setText(_translate("MainWindow", " Нов Артикул"))

    def loadData_ListBox_Client(self, index):
         self.listWidget.clear()
         self.comboBox.senderSignalIndex()
         clients = clients = my_session.query(Client).where(Client.Regions_ID == (self.comboBox.currentIndex()+1)).all()
         for client in clients:
            self.listWidget.addItem(client.Name)


    def incialisation_Begin():
        ui.setupUi()
        ui.loadData_ComboBox_Region


if __name__ == "__main__":
    import sys
    app = QtWidgets.QApplication(sys.argv)
    MainWindow = QtWidgets.QMainWindow()
    ui = Ui_MainWindow()
    ui.setupUi(MainWindow)
    MainWindow.show()
    ui.loaddataTableView()
    ui.loadData_ComboBox_Region()
    ui.loadData_ListBox_Client(ui.comboBox.currentIndex())
    sys.exit(app.exec_())
